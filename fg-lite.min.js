!function(){const e={config:{debug:!1,rootOnly:!0,requirePoW:!1,powDifficulty:18,logoUrl:"https://media.canva.com/v2/image-resize/format:PNG/height:981/quality:100/uri:ifs%3A%2F%2FM%2Ff828e78d-c114-4c65-af63-bc8c979b1cc2/watermark:F/width:1600?csig=AAAAAAAAAAAAAAAAAAAAAMVyZi1aPkHzluZahX6s3hT_vitmXAZ68Q9Vu8s7CDbg&exp=1755107411&osig=AAAAAAAAAAAAAAAAAAAAAMsnqBocZwf8I3cozDvjWB-yUlOAQp_Rvi2yT7Y7HVZY&signer=media-rpc&x-canva-quality=screen_2x"},async init(){if(!this.config.debug&&"1"===sessionStorage.getItem("FG_verified"))return;if(this.config.rootOnly&&!this.shouldRunOnThisPage())return;this.installStyles(),document.body.classList.add("fg-hidden"),this.showOverlay("Checking your browser…");const e=await this.collectSignals(),t=this.scoreSignals(e);if(t>=25&&t<=50&&this.config.requirePoW){if(!await this.powCheck(this.config.powDifficulty))return this.blockOverlay("Access denied. Suspicious activity detected.")}t>50?this.blockOverlay("Access denied. Suspicious activity detected."):(sessionStorage.setItem("FG_verified","1"),this.passOverlay("You're being redirected…",(()=>{document.body.classList.remove("fg-hidden"),this.removeOverlay()}))),setTimeout((()=>{document.body.classList.remove("fg-hidden"),this.removeOverlay()}),5e3),this.config.debug&&(console.debug("[FocusGuard] signals:",e),console.debug("[FocusGuard] score:",t))},shouldRunOnThisPage(){const e=location.pathname||"/",t="/"===e||""===e,n=document.referrer;if(t)return!0;if(!n)return!0;try{return new URL(n).hostname!==location.hostname}catch{return!0}},async collectSignals(){const e=navigator,t={ua:e.userAgent||"",uaBrands:e.userAgentData&&e.userAgentData.brands||null,platform:e.userAgentData&&e.userAgentData.platform||e.platform||"",webdriver:!!e.webdriver,languagesLen:e.languages&&e.languages.length||0,hasCookies:e.cookieEnabled,storageOK:!1,hc:e.hardwareConcurrency||0,deviceMemory:e.deviceMemory||0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone||"",webgl:{ok:!1,vendor:"",renderer:""},permsWeird:!1};try{localStorage.setItem("_fg","1"),localStorage.removeItem("_fg"),t.storageOK=!0}catch{t.storageOK=!1}try{const e=document.createElement("canvas"),n=e.getContext("webgl")||e.getContext("experimental-webgl");if(n){const e=n.getExtension("WEBGL_debug_renderer_info");t.webgl.ok=!0,t.webgl.vendor=e?n.getParameter(e.UNMASKED_VENDOR_WEBGL):"",t.webgl.renderer=e?n.getParameter(e.UNMASKED_RENDERER_WEBGL):""}}catch{}try{if(navigator.permissions&&navigator.permissions.query){const e=await navigator.permissions.query({name:"notifications"});t.permsWeird=e&&"denied"===e.state&&!t.hasCookies}}catch{}return t},scoreSignals(e){let t=0;e.webdriver&&(t+=60),e.hasCookies||(t+=25),e.storageOK||(t+=20),e.webgl.ok||(t+=15),0===e.languagesLen&&(t+=10),e.hc&&e.hc<=1&&(t+=10),e.permsWeird&&(t+=10);const n=(e.ua||"").toLowerCase();return/\bheadless\b|puppeteer|playwright/.test(n)&&(t+=25),Math.min(Math.max(t,0),100)},async powCheck(e){const t=async e=>{const t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")},n=e=>{let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){r<2?t+=3:r<4?t+=2:r<8&&(t+=1);break}t+=4}return t},r=String(Date.now())+"|"+Math.random();let o=0;for(;o<5e5;){if(n(await t((new TextEncoder).encode(r+"|"+o)))>=e)return!0;o++}return!1},installStyles(){if(document.getElementById("fg-style"))return;const e=document.createElement("style");e.id="fg-style",e.textContent="\n          body.fg-hidden > *:not(#fg-overlay){ visibility: hidden !important; }\n          #fg-overlay {\n            position:fixed; inset:0; background:#f9f9f9;\n            display:flex; flex-direction:column; align-items:center; justify-content:center;\n            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;\n            color:#333; text-align:center; padding:20px; opacity:0; transition:opacity .3s ease;\n            z-index:2147483647;\n          }\n          #fg-overlay.fg-show{ opacity:1; }\n          #fg-overlay .fg-spinner{\n            width:50px;height:50px;border:5px solid #ddd;border-top-color:#3498db;border-radius:50%;\n            animation:fg-spin 1s linear infinite;margin:18px auto 0;\n          }\n          @keyframes fg-spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}\n          #fg-overlay img{ width:180px; max-width:80%; height:auto; margin-bottom:22px; border-radius:6px; }\n          #fg-overlay h2{ font-weight:500; margin:0 0 10px; }\n          #fg-overlay p{ max-width:420px; margin:0 auto; line-height:1.5; color:#555; }\n        ",document.head.appendChild(e)},ensureOverlay(){let e=document.getElementById("fg-overlay");return e||(e=document.createElement("div"),e.id="fg-overlay",e.innerHTML=`\n            <img src="${this.config.logoUrl}" alt="FocusGuard">\n            <h2>Checking your browser…</h2>\n            <p>This process is automatic and should take only a moment.</p>\n            <div class="fg-spinner"></div>\n          `,document.body.appendChild(e),requestAnimationFrame((()=>e.classList.add("fg-show")))),e},showOverlay(e){const t=this.ensureOverlay().querySelector("h2");t&&(t.textContent=e||"Checking your browser…")},passOverlay(e,t){const n=this.ensureOverlay(),r=n.querySelector("h2"),o=n.querySelector("p");r&&(r.textContent=e||"You’re good to go."),o&&(o.textContent="Redirecting you to the page…"),setTimeout((()=>{t&&t()}),800)},blockOverlay(e){const t=this.ensureOverlay(),n=t.querySelector("h2"),r=t.querySelector("p");n&&(n.textContent=e||"Access denied"),r&&(r.textContent="Suspicious activity detected. Please try again later.")},removeOverlay(){const e=document.getElementById("fg-overlay");e&&e.remove()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>e.init())):e.init()}();