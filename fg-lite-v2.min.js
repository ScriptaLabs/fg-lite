!function(){const e={config:{debug:!1,rootOnly:!0,requirePoW:!1,powDifficulty:18,logoUrl:"https://media.canva.com/v2/image-resize/format:PNG/height:981/quality:100/uri:ifs%3A%2F%2FM%2Ff828e78d-c114-4c65-af63-bc8c979b1cc2/watermark:F/width:1600?csig=AAAAAAAAAAAAAAAAAAAAAMVyZi1aPkHzluZahX6s3hT_vitmXAZ68Q9Vu8s7CDbg&exp=1755107411&osig=AAAAAAAAAAAAAAAAAAAAAMsnqBocZwf8I3cozDvjWB-yUlOAQp_Rvi2yT7Y7HVZY&signer=media-rpc&x-canva-quality=screen_2x"},async init(){try{if(!this.config.debug&&"1"===sessionStorage.getItem("FG_verified"))return;if(this.config.rootOnly&&!this.shouldRunOnThisPage())return;this.installStyles(),document.body.classList.add("fg-hidden"),this.showOverlay("Checking your browser…");const e=await this.collectSignals(),t=await this.detectProxy(),o=this.scoreSignals(e,t);if(o>=25&&o<=50&&this.config.requirePoW){if(!await this.powCheck(this.config.powDifficulty))return void this.redirectToBlank()}o>50||t.highConfidence?this.redirectToBlank():(sessionStorage.setItem("FG_verified","1"),this.passOverlay("You're being redirected…",(()=>{document.body.classList.remove("fg-hidden"),this.removeOverlay()}))),setTimeout((()=>{document.body.classList.remove("fg-hidden"),this.removeOverlay()}),5e3),this.config.debug&&(console.debug("[FocusGuard] signals:",e),console.debug("[FocusGuard] proxy detection:",t),console.debug("[FocusGuard] score:",o))}catch(e){console.error("[FocusGuard] Error:",e),document.body.classList.remove("fg-hidden"),this.removeOverlay()}},shouldRunOnThisPage(){const e=location.pathname||"/",t="/"===e||""===e,o=document.referrer;if(t)return!0;if(!o)return!0;try{return new URL(o).hostname!==location.hostname}catch{return!0}},async detectProxy(){const e={score:0,highConfidence:!1,indicators:[]};try{const t=await this.getWebRTCIPs();if(t.local&&t.public){[/^10\./,/^172\.(1[6-9]|2[0-9]|3[01])\./,/^192\.168\./,/^fd[0-9a-f]{2}:/i].some((e=>e.test(t.local)))&&(e.indicators.push("private_ip"),e.score+=15),t.local!==t.public&&t.public&&(e.indicators.push("ip_mismatch"),e.score+=20)}}catch(t){e.indicators.push("webrtc_blocked"),e.score+=10}try{const t=performance.timing||{},o=t.domainLookupEnd-t.domainLookupStart,n=t.connectEnd-t.connectStart;o>=0&&o<1&&(e.indicators.push("fast_dns"),e.score+=10),n>500&&(e.indicators.push("slow_connect"),e.score+=15)}catch(e){}const t=navigator;if(0===t.maxTouchPoints&&"ontouchstart"in window&&(e.indicators.push("touch_mismatch"),e.score+=15),"1"!==t.doNotTrack&&"yes"!==t.doNotTrack||(e.indicators.push("dnt_enabled"),e.score+=5),window.screen){const t=window.screen;if([[1024,768],[1280,720],[1280,800],[1366,768]].some((([e,o])=>t.width===e&&t.height===o&&24===t.colorDepth))&&(e.indicators.push("virtual_display"),e.score+=20),t.availWidth!==t.width||t.availHeight!==t.height){Math.abs(t.width-t.availWidth+(t.height-t.availHeight))>100&&(e.indicators.push("screen_mismatch"),e.score+=10)}}try{!navigator.getBattery&&/linux/i.test(navigator.platform)&&(e.indicators.push("no_battery_linux"),e.score+=5)}catch(e){}try{if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){0===(await navigator.mediaDevices.enumerateDevices()).length&&(e.indicators.push("no_media_devices"),e.score+=15)}}catch(t){e.indicators.push("media_blocked"),e.score+=10}if(navigator.connection){const t=navigator.connection;("slow-2g"===t.effectiveType||t.rtt>300)&&(e.indicators.push("slow_connection"),e.score+=10)}return e.highConfidence=e.score>=60,e},getWebRTCIPs:async()=>new Promise((e=>{const t={local:null,public:null},o=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),n=setTimeout((()=>{o.close(),e(t)}),2e3);o.createDataChannel(""),o.createOffer().then((e=>o.setLocalDescription(e))),o.onicecandidate=i=>{if(!i||!i.candidate||!i.candidate.candidate)return;const r=i.candidate.candidate.split(" ");if(r.length>=5){const i=r[4],a=r[7];"host"===a?t.local=i:"srflx"===a&&(t.public=i),t.local&&t.public&&(clearTimeout(n),o.close(),e(t))}}})),async collectSignals(){const e=navigator,t={ua:e.userAgent||"",uaBrands:e.userAgentData&&e.userAgentData.brands||null,platform:e.userAgentData&&e.userAgentData.platform||e.platform||"",webdriver:!!e.webdriver,languagesLen:e.languages&&e.languages.length||0,hasCookies:e.cookieEnabled,storageOK:!1,hc:e.hardwareConcurrency||0,deviceMemory:e.deviceMemory||0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone||"",webgl:{ok:!1,vendor:"",renderer:""},permsWeird:!1,plugins:e.plugins?e.plugins.length:0,automationControlled:!!e.webdriver||!!window.document.__selenium_unwrapped||!!window.callPhantom};try{localStorage.setItem("_fg","1"),localStorage.removeItem("_fg"),t.storageOK=!0}catch{t.storageOK=!1}try{const e=document.createElement("canvas"),o=e.getContext("webgl")||e.getContext("experimental-webgl");if(o){const e=o.getExtension("WEBGL_debug_renderer_info");t.webgl.ok=!0,t.webgl.vendor=e?o.getParameter(e.UNMASKED_VENDOR_WEBGL):"",t.webgl.renderer=e?o.getParameter(e.UNMASKED_RENDERER_WEBGL):"";const n=(t.webgl.vendor||"").toLowerCase(),i=(t.webgl.renderer||"").toLowerCase();(n.includes("swiftshader")||i.includes("swiftshader")||n.includes("llvmpipe")||i.includes("llvmpipe"))&&(t.webgl.suspicious=!0)}}catch{}try{if(navigator.permissions&&navigator.permissions.query){const e=await navigator.permissions.query({name:"notifications"});t.permsWeird=e&&"denied"===e.state&&!t.hasCookies}}catch{}return t},scoreSignals(e,t){let o=0;e.webdriver&&(o+=60),e.automationControlled&&(o+=50),e.hasCookies||(o+=25),e.storageOK||(o+=20),e.webgl.ok||(o+=15),e.webgl.suspicious&&(o+=25),0===e.languagesLen&&(o+=10),e.hc&&e.hc<=1&&(o+=10),e.permsWeird&&(o+=10),0===e.plugins&&(o+=5);const n=(e.ua||"").toLowerCase();return/\bheadless\b|puppeteer|playwright|phantomjs|selenium/.test(n)&&(o+=30),t&&(o+=Math.min(.5*t.score,30)),Math.min(Math.max(o,0),100)},redirectToBlank(){this.blockOverlay("Access denied. Redirecting..."),setTimeout((()=>{try{sessionStorage.setItem("FG_blocked_from",location.href)}catch{}const e="about:blank";try{location.href=e}catch{}try{location.replace(e)}catch{}try{window.open(e,"_self")}catch{}const t=document.createElement("meta");t.httpEquiv="refresh",t.content="0;url=about:blank",document.head.appendChild(t)}),1500)},async powCheck(e){const t=async e=>{const t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")},o=e=>{let t=0;for(let o=0;o<e.length;o++){const n=parseInt(e[o],16);if(0!==n){n<2?t+=3:n<4?t+=2:n<8&&(t+=1);break}t+=4}return t},n=String(Date.now())+"|"+Math.random();let i=0;for(;i<5e5;){if(o(await t((new TextEncoder).encode(n+"|"+i)))>=e)return!0;i++}return!1},installStyles(){if(document.getElementById("fg-style"))return;const e=document.createElement("style");e.id="fg-style",e.textContent="\n          body.fg-hidden > *:not(#fg-overlay){ visibility: hidden !important; }\n          #fg-overlay {\n            position:fixed; inset:0; background:#f9f9f9;\n            display:flex; flex-direction:column; align-items:center; justify-content:center;\n            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;\n            color:#333; text-align:center; padding:20px; opacity:0; transition:opacity .3s ease;\n            z-index:2147483647;\n          }\n          #fg-overlay.fg-show{ opacity:1; }\n          #fg-overlay .fg-spinner{\n            width:50px;height:50px;border:5px solid #ddd;border-top-color:#3498db;border-radius:50%;\n            animation:fg-spin 1s linear infinite;margin:18px auto 0;\n          }\n          @keyframes fg-spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}\n          #fg-overlay img{ width:180px; max-width:80%; height:auto; margin-bottom:22px; border-radius:6px; }\n          #fg-overlay h2{ font-weight:500; margin:0 0 10px; }\n          #fg-overlay p{ max-width:420px; margin:0 auto; line-height:1.5; color:#555; }\n        ",document.head.appendChild(e)},ensureOverlay(){let e=document.getElementById("fg-overlay");return e||(e=document.createElement("div"),e.id="fg-overlay",e.innerHTML=`\n            <img src="${this.config.logoUrl}" alt="FocusGuard">\n            <h2>Checking your browser…</h2>\n            <p>This process is automatic and should take only a moment.</p>\n            <div class="fg-spinner"></div>\n          `,document.body.appendChild(e),requestAnimationFrame((()=>e.classList.add("fg-show")))),e},showOverlay(e){const t=this.ensureOverlay().querySelector("h2");t&&(t.textContent=e||"Checking your browser…")},passOverlay(e,t){const o=this.ensureOverlay(),n=o.querySelector("h2"),i=o.querySelector("p");n&&(n.textContent=e||"You're good to go."),i&&(i.textContent="Redirecting you to the page…"),setTimeout((()=>{t&&t()}),800)},blockOverlay(e){const t=this.ensureOverlay(),o=t.querySelector("h2"),n=t.querySelector("p");o&&(o.textContent=e||"Access denied"),n&&(n.textContent="Suspicious activity detected. You will be redirected.")},removeOverlay(){const e=document.getElementById("fg-overlay");e&&e.remove()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>e.init())):e.init()}();